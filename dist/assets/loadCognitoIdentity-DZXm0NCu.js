import{c as de,g as ce,n as le,r as pe,B as ue,a as ye,E as he,b as me,d as xe,f as we,t as Ee,A as ve,N as ge,p as Se,e as Pe,h as Ce,i as Ie,D as be,j as fe,F as Re,k as Ae,S as ke,s as _e,l as De,m as ze,o as $e,q as Fe,u as Oe,v as He,w as Ne,x as Le,y as Te,z as je,C as Me,G as Ue,H as Ge,I as qe,J as Be,K as Ke,L as Je,M as Ve,O as We,P as Xe,Q as Ye,R as Qe,T as Ze,U as et,V as tt,W as st,X as R,Y as l,Z as nt,_ as ot,$ as Y,a0 as f,a1 as it,a2 as rt,a3 as at,a4 as Q,a5 as Z,a6 as ee}from"./index-B6qz5zfm.js";const r=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(r);if(typeof e=="object"){const t={};for(const s of Object.keys(e))e[s]!=null&&(t[s]=r(e[s]));return t}return e};class dt{async sign(t,s,n){return t}}const A=(e,t)=>de(e,t).then(s=>{if(s.length)try{return JSON.parse(s)}catch(n){throw(n==null?void 0:n.name)==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:s}),n}return{}}),ct=async(e,t)=>{const s=await A(e,t);return s.message=s.message??s.Message,s},lt=(e,t)=>{const s=(d,i)=>Object.keys(d).find(m=>m.toLowerCase()===i.toLowerCase()),n=d=>{let i=d;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=s(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},pt=async(e,t,s)=>({operation:ce(t).operation,region:await le(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function ut(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function I(e){return{schemeId:"smithy.api#noAuth"}}const yt=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(I());break}case"GetId":{t.push(I());break}case"GetOpenIdToken":{t.push(I());break}case"UnlinkIdentity":{t.push(I());break}default:t.push(ut(e))}return t},ht=e=>({...pe(e)}),mt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),te={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},xt="@aws-sdk/client-cognito-identity",wt="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",Et="3.675.0",vt={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js"},gt="./dist-cjs/index.js",St="./dist-types/index.d.ts",Pt="./dist-es/index.js",Ct=!1,It={"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.675.0","@aws-sdk/client-sts":"3.675.0","@aws-sdk/core":"3.667.0","@aws-sdk/credential-provider-node":"3.675.0","@aws-sdk/middleware-host-header":"3.667.0","@aws-sdk/middleware-logger":"3.667.0","@aws-sdk/middleware-recursion-detection":"3.667.0","@aws-sdk/middleware-user-agent":"3.669.0","@aws-sdk/region-config-resolver":"3.667.0","@aws-sdk/types":"3.667.0","@aws-sdk/util-endpoints":"3.667.0","@aws-sdk/util-user-agent-browser":"3.675.0","@aws-sdk/util-user-agent-node":"3.669.0","@smithy/config-resolver":"^3.0.9","@smithy/core":"^2.4.8","@smithy/fetch-http-handler":"^3.2.9","@smithy/hash-node":"^3.0.7","@smithy/invalid-dependency":"^3.0.7","@smithy/middleware-content-length":"^3.0.9","@smithy/middleware-endpoint":"^3.1.4","@smithy/middleware-retry":"^3.0.23","@smithy/middleware-serde":"^3.0.7","@smithy/middleware-stack":"^3.0.7","@smithy/node-config-provider":"^3.1.8","@smithy/node-http-handler":"^3.2.4","@smithy/protocol-http":"^4.1.4","@smithy/smithy-client":"^3.4.0","@smithy/types":"^3.5.0","@smithy/url-parser":"^3.0.7","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.23","@smithy/util-defaults-mode-node":"^3.0.23","@smithy/util-endpoints":"^2.1.3","@smithy/util-middleware":"^3.0.7","@smithy/util-retry":"^3.0.7","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},bt={"@aws-sdk/client-iam":"3.675.0","@tsconfig/node16":"16.1.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},ft={node:">=16.0.0"},Rt={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},At=["dist-*/**"],kt={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},_t="Apache-2.0",Dt={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},zt="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",$t={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},Ft={name:xt,description:wt,version:Et,scripts:vt,main:gt,types:St,module:Pt,sideEffects:Ct,dependencies:It,devDependencies:bt,engines:ft,typesVersions:Rt,files:At,author:kt,license:_t,browser:Dt,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:zt,repository:$t},Ot=({serviceId:e,clientVersion:t})=>async s=>{var i,m,x,w,g,C;const n=typeof window<"u"&&((i=window==null?void 0:window.navigator)!=null&&i.userAgent)?ue.parse(window.navigator.userAgent):void 0,o=[["aws-sdk-js",t],["ua","2.1"],[`os/${((m=n==null?void 0:n.os)==null?void 0:m.name)||"other"}`,(x=n==null?void 0:n.os)==null?void 0:x.version],["lang/js"],["md/browser",`${((w=n==null?void 0:n.browser)==null?void 0:w.name)??"unknown"}_${((g=n==null?void 0:n.browser)==null?void 0:g.version)??"unknown"}`]];e&&o.push([`api/${e}`,t]);const d=await((C=s==null?void 0:s.userAgentAppId)==null?void 0:C.call(s));return d&&o.push([`app/${d}`]),o},se="required",u="fn",y="argv",v="ref",M=!0,U="isSet",P="booleanEquals",E="error",S="endpoint",h="tree",k="PartitionResult",G={[se]:!1,type:"String"},q={[se]:!0,default:!1,type:"Boolean"},B={[v]:"Endpoint"},ne={[u]:P,[y]:[{[v]:"UseFIPS"},!0]},oe={[u]:P,[y]:[{[v]:"UseDualStack"},!0]},p={},K={[u]:"getAttr",[y]:[{[v]:k},"supportsFIPS"]},J={[u]:P,[y]:[!0,{[u]:"getAttr",[y]:[{[v]:k},"supportsDualStack"]}]},V=[ne],W=[oe],X=[{[v]:"Region"}],Ht={version:"1.0",parameters:{Region:G,UseDualStack:q,UseFIPS:q,Endpoint:G},rules:[{conditions:[{[u]:U,[y]:[B]}],rules:[{conditions:V,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:E},{conditions:W,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:E},{endpoint:{url:B,properties:p,headers:p},type:S}],type:h},{conditions:[{[u]:U,[y]:X}],rules:[{conditions:[{[u]:"aws.partition",[y]:X,assign:k}],rules:[{conditions:[ne,oe],rules:[{conditions:[{[u]:P,[y]:[M,K]},J],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:p,headers:p},type:S}],type:h},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:E}],type:h},{conditions:V,rules:[{conditions:[{[u]:P,[y]:[K,M]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:p,headers:p},type:S}],type:h},{error:"FIPS is enabled but this partition does not support FIPS",type:E}],type:h},{conditions:W,rules:[{conditions:[J],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:p,headers:p},type:S}],type:h},{error:"DualStack is enabled but this partition does not support DualStack",type:E}],type:h},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:p,headers:p},type:S}],type:h}],type:h},{error:"Invalid Configuration: Missing Region",type:E}]},Nt=Ht,Lt=new he({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Tt=(e,t={})=>Lt.get(e,()=>ye(Nt,{endpointParams:e,logger:t.logger}));me.aws=xe;const jt=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??we,base64Encoder:(e==null?void 0:e.base64Encoder)??Ee,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Tt,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??yt,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ve},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new dt}],logger:(e==null?void 0:e.logger)??new ge,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??Se,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Pe,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Ce}),Mt=e=>{const t=$e(e),s=()=>t().then(Fe),n=jt(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ie,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Ot({serviceId:n.serviceId,clientVersion:Ft.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??be,region:(e==null?void 0:e.region)??fe("Region is missing"),requestHandler:Re.create((e==null?void 0:e.requestHandler)??s),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await s()).retryMode||Ae),sha256:(e==null?void 0:e.sha256)??ke,streamCollector:(e==null?void 0:e.streamCollector)??_e,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(De)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(ze))}},Ut=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const d=t.findIndex(i=>i.schemeId===o.schemeId);d===-1?t.push(o):t.splice(d,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){s=o},httpAuthSchemeProvider(){return s},setCredentials(o){n=o},credentials(){return n}}},Gt=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),b=e=>e,qt=(e,t)=>{const s={...b(je(e)),...b(Oe(e)),...b(He(e)),...b(Ut(e))};return t.forEach(n=>n.configure(s)),{...e,...Ne(s),...Le(s),...Te(s),...Gt(s)}};class hs extends Me{constructor(...[t]){const s=Mt(t||{}),n=mt(s),o=Ue(n),d=Ge(o),i=qe(d),m=tt(i),x=Be(m),w=ht(x),g=qt(w,(t==null?void 0:t.extensions)||[]);super(g),this.config=g,this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Je(this.config)),this.middlewareStack.use(Ve(this.config)),this.middlewareStack.use(We(this.config)),this.middlewareStack.use(Xe(this.config)),this.middlewareStack.use(Ye(this.config)),this.middlewareStack.use(Qe(this.config,{httpAuthSchemeParametersProvider:pt,identityProviderConfigProvider:async C=>new Ze({"aws.auth#sigv4":C.credentials})})),this.middlewareStack.use(et(this.config))}destroy(){super.destroy()}}class a extends st{constructor(t){super(t),Object.setPrototypeOf(this,a.prototype)}}class _ extends a{constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,_.prototype)}}class D extends a{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,D.prototype)}}class z extends a{constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,z.prototype)}}class $ extends a{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,$.prototype)}}class F extends a{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,F.prototype)}}class O extends a{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,O.prototype)}}class H extends a{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,H.prototype)}}class N extends a{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,N.prototype)}}class L extends a{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,L.prototype)}}class T extends a{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,T.prototype)}}class j extends a{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,j.prototype)}}const Bt=e=>({...e,...e.Logins&&{Logins:R}}),Kt=e=>({...e,...e.SecretKey&&{SecretKey:R}}),Jt=e=>({...e,...e.Credentials&&{Credentials:Kt(e.Credentials)}}),Vt=e=>({...e,...e.Logins&&{Logins:R}}),Wt=async(e,t)=>{const s=ae("GetCredentialsForIdentity");let n;return n=JSON.stringify(r(e)),re(t,s,"/",void 0,n)},Xt=async(e,t)=>{const s=ae("GetId");let n;return n=JSON.stringify(r(e)),re(t,s,"/",void 0,n)},Yt=async(e,t)=>{if(e.statusCode>=300)return ie(e,t);const s=await A(e.body,t);let n={};return n=ps(s),{$metadata:c(e),...n}},Qt=async(e,t)=>{if(e.statusCode>=300)return ie(e,t);const s=await A(e.body,t);let n={};return n=r(s),{$metadata:c(e),...n}},ie=async(e,t)=>{const s={...e,body:await ct(e.body,t)},n=lt(e,s.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await ss(s);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await os(s);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await is(s);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await rs(s);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await as(s);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await cs(s);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await ds(s);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await ts(s);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await ns(s);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await es(s);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Zt(s);default:const o=s.body;return us({output:e,parsedBody:o,errorCode:n})}},Zt=async(e,t)=>{const s=e.body,n=r(s),o=new j({$metadata:c(e),...n});return l(o,s)},es=async(e,t)=>{const s=e.body,n=r(s),o=new T({$metadata:c(e),...n});return l(o,s)},ts=async(e,t)=>{const s=e.body,n=r(s),o=new N({$metadata:c(e),...n});return l(o,s)},ss=async(e,t)=>{const s=e.body,n=r(s),o=new _({$metadata:c(e),...n});return l(o,s)},ns=async(e,t)=>{const s=e.body,n=r(s),o=new L({$metadata:c(e),...n});return l(o,s)},os=async(e,t)=>{const s=e.body,n=r(s),o=new D({$metadata:c(e),...n});return l(o,s)},is=async(e,t)=>{const s=e.body,n=r(s),o=new z({$metadata:c(e),...n});return l(o,s)},rs=async(e,t)=>{const s=e.body,n=r(s),o=new $({$metadata:c(e),...n});return l(o,s)},as=async(e,t)=>{const s=e.body,n=r(s),o=new F({$metadata:c(e),...n});return l(o,s)},ds=async(e,t)=>{const s=e.body,n=r(s),o=new H({$metadata:c(e),...n});return l(o,s)},cs=async(e,t)=>{const s=e.body,n=r(s),o=new O({$metadata:c(e),...n});return l(o,s)},ls=(e,t)=>Y(e,{AccessKeyId:f,Expiration:s=>it(rt(at(s))),SecretKey:f,SessionToken:f}),ps=(e,t)=>Y(e,{Credentials:s=>ls(s),IdentityId:f}),c=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),us=nt(a),re=async(e,t,s,n,o)=>{const{hostname:d,protocol:i="https",port:m,path:x}=await e.endpoint(),w={protocol:i,hostname:d,port:m,method:"POST",path:x.endsWith("/")?x.slice(0,-1)+s:x+s,headers:t};return o!==void 0&&(w.body=o),new ot(w)};function ae(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class ms extends Q.classBuilder().ep(te).m(function(t,s,n,o){return[Z(n,this.serialize,this.deserialize),ee(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(Bt,Jt).ser(Wt).de(Yt).build(){}class xs extends Q.classBuilder().ep(te).m(function(t,s,n,o){return[Z(n,this.serialize,this.deserialize),ee(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Vt,void 0).ser(Xt).de(Qt).build(){}export{hs as CognitoIdentityClient,ms as GetCredentialsForIdentityCommand,xs as GetIdCommand};
